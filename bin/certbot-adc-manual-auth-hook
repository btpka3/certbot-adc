#!/usr/bin/env python
# -*- coding: utf8 -*-

import os
import sys
import logging
from certbot_adc import CadcProviders

logging.basicConfig(
    format='%(asctime)s:%(levelname)s:%(name)s:%(message)s',
    # filename='/tmp/example.log',
    stream=sys.stdout,
    level=logging.DEBUG
)
logger = logging.getLogger("certbot_adc.certbot-adc-manual-auth-hook")

domain = os.environ.get('CERTBOT_DOMAIN')
assert domain, "Environment variable 'CERTBOT_DOMAIN' is not set."

token = os.environ.get('CERTBOT_VALIDATION')
assert token, "Environment variable 'CERTBOT_VALIDATION' is not set."
logger.info("Setup DNS challenge for '" + domain + "' with token '" + token + "'")

fac = CadcProviders.CadcProviders()
fac.update_dns01(domain, token)

u"""
1. 解析并检查配置文件
2. 调用相应的API "_acme-challenge.test13"
import logging
logging.basicConfig(
    format='%(asctime)s - [%(levelname)-7s] - %(name)s : %(message)s',
    #filename='/tmp/example.log',
    level=logging.DEBUG
)
logging.debug('This message should go to the log file')
logging.warning('Watch out!')  # will print a message to the console
logging.info('I told you so')  #

logger = logging.getLogger(__name__)
logger.info("hi~~~~")
"""
